package app.fxml.controleurs;

import java.io.IOException;
import java.net.URL;
import java.util.Map;
import java.util.Random;
import java.util.HashMap;
import java.util.ResourceBundle;

import app.Main;
import app.graphicplace.GraphicPlace;
import app.model.map.Place;
import app.model.map.World;
import app.model.parser.WorldIO;
import javafx.beans.property.SimpleObjectProperty;
import javafx.collections.ObservableList;

import app.graphic.path.GraphicPath;
import app.graphicplace.GraphicPlace;
import app.model.map.Path;
import app.model.map.Place;
import app.model.map.World;

import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.layout.Pane;

public class MainController implements Initializable {

	@FXML
	public GraphicController centralController;

	public GraphicPath ah;
	public SimpleObjectProperty<World> world;
	private Place place;
	public boolean dijkstraInProgress;
	public boolean worldGenInProgress;
	// public ObservableList<DijkstraEventListener> obsList;

	private final Map<Place, GraphicPlace> placeMap = new HashMap<>();
	private final Map<Path, GraphicPath> pathMap = new HashMap<>();
	private World currentWorld;

	@Override
	public void initialize(URL location, ResourceBundle resources) {

		centralController.setApp(this);
		try {
			world = new SimpleObjectProperty<World>(WorldIO.loadWorld(Main.class.getResourceAsStream("Monde1.json")));
		} catch (IOException e) {
			e.printStackTrace();
		}

	}

	public GraphicPlace getGraphicPlace(Place place) {
		return placeMap.get(place);
	}

	public GraphicPath getGraphicPath(Path path) {
		return pathMap.get(path);
	}

	// MÃ©thodes
	public void registerPlace(Place place, GraphicPlace graphic) {
		placeMap.put(place, graphic);
	}

	public void registerPath(Path path, GraphicPath graphic) {
		pathMap.put(path, graphic);
	}

}